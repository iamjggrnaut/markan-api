# Руководство по тестированию

## Backend тесты

### Запуск тестов

```bash
# Все тесты
npm test

# Тесты с покрытием
npm run test:cov

# Тесты в watch режиме
npm run test:watch

# E2E тесты
npm run test:e2e
```

### Структура тестов

- `*.spec.ts` - Unit тесты для сервисов
- `test/*.e2e-spec.ts` - E2E тесты для API

### Покрытие

Текущее покрытие критичных модулей:
- ✅ AuthService - аутентификация
- ✅ ApiKeysService - API ключи
- ✅ IntegrationsService - интеграции
- ✅ PlansService - тарифные планы

### Добавление новых тестов

1. Создайте файл `*.spec.ts` рядом с тестируемым файлом
2. Используйте моки для зависимостей
3. Тестируйте основные сценарии (happy path и error cases)

## Frontend тесты

### Запуск тестов

```bash
# Все тесты
npm test

# Тесты с UI
npm run test:ui

# Тесты с покрытием
npm run test:coverage
```

### Структура тестов

- `*.spec.tsx` - Unit тесты для компонентов
- Используется Vitest + Testing Library

### Покрытие

Текущее покрытие:
- ✅ Button - базовый компонент
- ✅ ProtectedRoute - защита маршрутов

## E2E тесты

E2E тесты проверяют основные пользовательские сценарии:
- Регистрация пользователя
- Вход в систему
- Создание интеграции
- Получение данных

## Рекомендации

1. **Приоритет**: Тестируйте критичные бизнес-логику (auth, payments, integrations)
2. **Моки**: Используйте моки для внешних зависимостей (БД, API)
3. **Изоляция**: Каждый тест должен быть независимым
4. **Читаемость**: Называйте тесты понятно, описывайте что тестируется

