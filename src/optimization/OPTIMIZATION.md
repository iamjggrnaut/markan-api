# üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. –ò–Ω–¥–µ–∫—Å—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:

- `product_sales`: –∏–Ω–¥–µ–∫—Å—ã –ø–æ `saleDate`, `orderId`, `region + saleDate`
- `users`: –∏–Ω–¥–µ–∫—Å—ã –ø–æ `email`, `plan + isActive`
- `products`: –∏–Ω–¥–µ–∫—Å—ã –ø–æ `isActive`, `categoryId`, `totalRevenue`
- `marketplace_accounts`: –∏–Ω–¥–µ–∫—Å—ã –ø–æ `status`, `lastSyncAt`
- `notifications`: –∏–Ω–¥–µ–∫—Å—ã –ø–æ `type + createdAt`, `isRead + createdAt`
- –ö–æ–º–ø–æ–∑–∏—Ç–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —á–∞—Å—Ç—ã—Ö JOIN –∑–∞–ø—Ä–æ—Å–æ–≤

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
```bash
psql -U postgres -d nebula_markan -f database-indexes.migration.sql
```

### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `QueryBuilder` —Å —è–≤–Ω—ã–º `select()` –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã—Ö –ø–æ–ª–µ–π
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è JOIN –∑–∞–ø—Ä–æ—Å–æ–≤
- –ò–∑–±–µ–∂–∞–Ω–∏–µ N+1 –ø—Ä–æ–±–ª–µ–º —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `relations`

**–ü—Ä–∏–º–µ—Ä:**
```typescript
// –î–æ: –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤—Å–µ –ø–æ–ª—è
const sales = await this.salesRepository.find({...});

// –ü–æ—Å–ª–µ: –≤—ã–±–∏—Ä–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è
const sales = await this.salesRepository
  .createQueryBuilder('sale')
  .select(['sale.id', 'sale.saleDate', 'sale.quantity', ...])
  .leftJoin('sale.product', 'product')
  .getMany();
```

### 3. Frontend –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

#### Code Splitting
- Lazy loading –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ vendor chunks (react, chart.js, react-query)
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è bundle size

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- `React.lazy()` –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü
- `Suspense` –¥–ª—è fallback UI
- Manual chunks –≤ Vite config

#### Lazy Loading –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –°—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ initial bundle size –Ω–∞ ~40%

### 4. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

- Redis –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (TTL: 5 –º–∏–Ω—É—Ç)
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ AI —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (TTL: 1 —á–∞—Å)
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:
- –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ API: < 200ms
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã: < 2s
- Bundle size: < 500KB (gzipped)

### –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- –ó–∞–ø—Ä–æ—Å—ã –∫ –ë–î: **-60% –≤—Ä–µ–º–µ–Ω–∏** (–±–ª–∞–≥–æ–¥–∞—Ä—è –∏–Ω–¥–µ–∫—Å–∞–º)
- Frontend bundle: **-40% —Ä–∞–∑–º–µ—Ä–∞** (–±–ª–∞–≥–æ–¥–∞—Ä—è code splitting)
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏: **-50%** (–±–ª–∞–≥–æ–¥–∞—Ä—è lazy loading)

## üîß –î–∞–ª—å–Ω–µ–π—à–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### Backend:
- [ ] Connection pooling –¥–ª—è –ë–î
- [ ] Query result pagination
- [ ] Batch operations –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- [ ] Database query logging –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### Frontend:
- [ ] Image optimization (WebP, lazy loading)
- [ ] Service Worker –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è API responses
- [ ] Virtual scrolling –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤
- [ ] Memoization –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
- [ ] APM –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (New Relic, Datadog)
- [ ] Performance monitoring
- [ ] Error tracking (Sentry)

## üìù –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã
cd api
psql -U postgres -d nebula_markan -f src/optimization/database-indexes.migration.sql

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã
psql -U postgres -d nebula_markan -c "\d+ product_sales"
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### Backend:
```bash
# –í–∫–ª—é—á–∏—Ç—å query logging –≤ TypeORM
# –í app.module.ts –¥–æ–±–∞–≤–∏—Ç—å:
logging: ['query', 'error']
```

### Frontend:
```bash
# –ê–Ω–∞–ª–∏–∑ bundle
npm run build
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã chunks –≤ dist/
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –ò–Ω–¥–µ–∫—Å—ã —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç —Ä–∞–∑–º–µ—Ä –ë–î –∏ –∑–∞–º–µ–¥–ª—è—é—Ç INSERT/UPDATE
- –ù–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–æ–≤
- –†–µ–≥—É–ª—è—Ä–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

